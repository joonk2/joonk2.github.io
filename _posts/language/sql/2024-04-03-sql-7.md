---
title:  "SQL_7 (Scalar Functions)"
layout: post
categories: [language, sql]
tags: [sql, ì œë¡œë² ì´ìŠ¤]
toc: true
toc_sticky: true
date: 2024-04-03
---

<!-- MathJax Script for this post only -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$'], ['\\[','\\]'] ],
      processEscapes: true
    }
  });
</script>

#### ğŸ™…â€â™‚ï¸íœ´ëŒ€í°ìœ¼ë¡œ ë³¼ ë•Œ í˜¹ì‹œ ê¸€ìë‚˜ ìˆ«ìê°€ í™”ë©´ì— ë‹¤ ì•ˆë‚˜ì˜¤ë©´<span style="color:red">**,**</span> íœ´ëŒ€í° ê°€ë¡œë¡œ ëŒë¦¬ì‹œë©´ ë©ë‹ˆë‹¤



```md
<ëª©ì°¨>

1. ì„¸íŒ…
2. ì‹¤ìŠµ
```
<br>

# 1. ì„¸íŒ…
```sql
# ---------------------- sandwich ë¶ˆëŸ¬ì˜¤ê¸° -------------------------
# mysql aws ë¡œê·¸ì¸
import mysql.connector
import pandas as pd

mcon = mysql.connector.connect(
    host = "ì•„ë§ˆì¡´ì£¼ì†Œ",
    port  = 3306,
    user = 'admin',
    password = "ë¹„ë²ˆ",
    database = "zerobase"
)

# df.info() í™•ì¸
df = pd.read_csv('./best_sandwich.csv', encoding = 'utf-8')
df.info()
```
![Desktop View](/assets/img//language/sql/sql7/1.png)
<br><br>

### ìœ„ì˜  ì •ë³´ë¥¼ í† ëŒ€ë¡œ sql ì œì‘
```sql
# sqlì—ì„œ sandwich í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ì œì‘
sql = "create table sandwich (ranking int, cafe varchar(32), menu varchar(32), price float, address varchar(32))"
cur = mcon.cursor(buffered=True)
cur.execute(sql)

# sandwich í…Œì´ë¸” ì˜ ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸
cur.execute('desc sandwich')
res = cur.fetchall()
for r in res:
    print(r)
    
    
# íŠœí”Œí˜•ì‹ìœ¼ë¡œ í•˜ë‚˜ì”© ìë£Œ ì¶”ê°€
sql = "insert into sandwich values (%s, %s, %s, %s ,%s)"
for i, r in df.iterrows():
    cur.execute(sql, tuple(r))
    print(tuple(r))
    mcon.commit()
    

# ë‹«ê¸°
mcon.close()
------------------------------------------------------------

# cmdì°½ì—ì„œ ìë£Œë“¤ ì˜ ë“¤ì–´ì™”ë‚˜ í™•ì¸ 
select * from sandwich;
```
<br><br><br>

# 2. ì‹¤ìŠµ
```sql
# ucase
# ì˜ë¬¸ì„ ëŒ€ë¬¸ìë¡œ ë³€í™˜
select ('this is ucase test');
select ucase('this is ucase test');

# lcase
# ì˜ë¬¸ì„ ì†Œë¬¸ìë¡œ ë³€í™˜
select lcase(menu) from sandwich where price < 5;

# mid
# ë¬¸ìì—´ ë¶€ë¶„ì„ ë°˜í™˜
select mid('ë¬¸ì¥', 'ì‹œì‘í•  ìœ„ì¹˜', 'ë°˜í™˜í•  ê¸¸ì´');
â¬‡ï¸
select mid('This is mid test', -4, 4);

# length
# ê¸¸ì´
select mid(' '); â¡ï¸ # 1

# round
# ë°˜ì˜¬ë¦¼
select round(ìˆ«ì, ì†Œìˆ˜ì  n+1ìë¦¬ë¶€í„° ë°˜ì˜¬ë¦¼);
â¬‡ï¸
select round(315.625, 1); â¡ï¸ # 315.6

# now
# í˜„ì¬ë‚ ì§œ ë° ì‹œê°„ ë°˜í™˜
select now();

# FORMAT
ìˆ«ìë¥¼ ì²œë‹¨ìœ„ ì½¤ë§ˆê°€ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
select format(12345.6789, 0)
```